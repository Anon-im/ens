FROM node:18

WORKDIR /app

ARG ENV_FILE
ARG WEB3SIGNER_BASE_URL
ARG WEB3SIGNER_PUBLIC_KEY

ENV WEB3SIGNER_BASE_URL=$WEB3SIGNER_BASE_URL
ENV WEB3SIGNER_PUBLIC_KEY=$WEB3SIGNER_PUBLIC_KEY

COPY . .

COPY $ENV_FILE .env

RUN npm install
RUN npm run build

EXPOSE 3000

CMD ["npm", "start"]